---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const projects = await getCollection("projects");
  return projects.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

// 2. Get the entry for the current page
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title} description={entry.data.description}>
  <main id="main-content">
    <section class="projects border-top">
      <div class="container">
        <div class="filter-wrapper">
          {/* Back Button */}
          <a
            href="/#projects"
            class="inline-block mb-8 text-sm hover:underline opacity-70"
          >
            ‚Üê Back to Projects
          </a>
          <button class="filter-toggle mono" id="filter-toggle">
            <span class="prompt">$</span>
            <span class="command">ls -C technologies/</span>
            <span class="cursor">_</span>
          </button>

          <article class="prose lg:prose-xl dark:prose-invert max-w-none">
            <Content />
          </article>
        </div>
      </div>
    </section>
  </main>
</Layout>
